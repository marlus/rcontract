<%= select :user, :group_id,
       Group.find(:all).collect {|c| [ c.name, c.id ] },
       { :include_blank => true } %>
<% javascript_tag do -%>
  var <%= "#{form_items}" %> = [
    <%= ext_field(:field_label => 'UsuÃ¡rio', :name => 'user[username]', :xtype => :text_field) %>,
	{
		fieldLabel:    'Senha',
		xtype:         'textfield',
		name:		   'user[password]',
		allowBlank:	   'false',
		inputType:	   'password'
	},
    <%= ext_field(:field_label => 'Nome', :name => 'user[name]', :xtype => :text_field) %>,
    <%= ext_field(:field_label => 'E-mail', :name => 'user[email]', :xtype => :text_field) %>,
	<%= file_field 'upload', 'datafile' %>,
    { 
		fieldLabel:    'Grupo',
		xtype:         'combo',
		triggerAction: 'all',
		typeAhead:      true,
		forceSelection: true,
		transform:     'user_group_id',
		lazyRender:     true
    }
  ];
<% end -%>